<!DOCTYPE html>

<html>
<head>
	<link rel="stylesheet" type="text/css" href="{{url('/css/style.css')}}">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/
font-awesome.min.css">
	<script type="text/javascript" src="/js/jquery.min.js"></script>
	<script src="/js/owl.caroussel.js"></script>
	<title>acceuil</title>

</head>
<body class="containeur2">
	<div class="entete">
		<div>
			<img src="/images/logo3.PNG" class="center">
		</div>
		<div>
			<h1><a class="lien_auth" href="/home"> Se connecter</a></h1>
		</div>
	</div>
	
	<div class="ecran4">
		
		@isset($video)
			@foreach($video as $vid)
			 	<div class="espace_lecteur">
			 		<div class="lecteur">
			 			<video id="myVideo" src="{{$vid->lien_fichier}}" autoplay loop muted playsinline ></video>
			 		</div>
			 	</div>
			@endforeach
		@endisset

		<div class="slid owl-carousel">

			@foreach($videos as $vid)
			 	<div class="film2">
					<div class="movie-image movie-image-1" style="background: url({{$vid->lien_affiche}}); height: 200px; background-size: cover; background-repeat: no-repeat;">
						<span> <i class="fa fa-align-left"></i></span>
					</div>
					<div class="movie-info">
						<p class="titre" style="color: yellow;">{{$vid->titre}}</p>
						<div class="actions">
							<button onclick="window.location='/video/item/{{$vid->id}}'"><i class="fa fa-play"></i> Voir video</button>
						</div>
					</div>
				</div>
			@endforeach
		</div>

	</div>

	<script type="text/javascript">

		var vid = document.getElementById("myVideo");
		var fillBar = document.getElementById("fill");
		var fillBar1 = document.getElementById("fill1");
		var currentTime = document.getElementById("currentTime");
		var volumeSlider = document.getElementById("volume");
		var volumeCourant = 0 ;

		$(".slid").owlCarousel({
			loop: true,
			autoplay: true,
			autoplayTimeout: 5000,
			autoplayHoverPause: true,

		}); 

		/*window.onload = function(){
			vid.play();
			$("#playBtn").attr("src","/images/pause.png");
			volumeSlider.value = vid.volume;
			fillBar1.value = 0;

		}

		function niveauFilm(){


		}

		function mettrePause(){
			if (vid.paused) {
				vid.play();
				$("#playBtn").attr("src","/images/pause.png")
			} else {
				vid.pause();
				$("#playBtn").attr("src","/images/play.png")
			}
		}

		function fullScreen(){
			var mediaElement = document.getElementById('myVideo');
			mediaElement.seekable.start();  // Returns the starting time (in seconds)
			mediaElement.seekable.end();    // Returns the ending time (in seconds)
			mediaElement.currentTime = 122; // Seek to 122 seconds
			mediaElement.played.end();
		}

		function playOrpause() {
		
			if (vid.paused) {
				vid.play();
				$("#playBtn").attr("src","/images/pause.png")
			} else {
				vid.pause();
				$("#playBtn").attr("src","/images/play.png")
			}
		}

		var vid = document.getElementById("myVideo");
		vid.addEventListener('timeupdate', function(){
				var position = vid.currentTime / vid.duration;
				fillBar.style.width = position * 100 +'%';
				convertTime(Math.round(vid.currentTime));

				if (vid.ended) {
					$("#playBtn").attr("src", "/images/play.png")
				}
		});

		function convertTime(seconds)
		{
			var min = Math.floor(seconds / 60);
			var sec = seconds % 60;

			min = (min < 10) ? "0" + min : min;
			sec = (sec < 10) ? "0" + sec : sec;
			currentTime.textContent = min + ":" + sec;
			totalTime(Math.round(vid.duration));
		}

		function totalTime(seconds){
			var min = Math.floor(seconds / 60);
			var sec = seconds % 60;

			min = (min < 10) ? "0" + min : min;
			sec = (sec < 10) ? "0" + sec : sec;
			currentTime.textContent += "/" + min + ":" + sec;
		}

		function changeVolume(){
			vid.volume = volumeSlider.value;
			if (volumeSlider.value == 0) {
				$("#speaker").attr("src", "/images/mute.png");
			} else {
				$("#speaker").attr("src", "/images/speaker.png");
			}
		}

		function putMute(){
			if (volumeCourant == 0) {
				$("#speaker").attr("src", "/images/mute.png");
				volumeCourant = vid.volume;
				volumeSlider.value = 0;
				vid.volume = 0;
			} else {
				$("#speaker").attr("src", "/images/speaker.png");
				vid.volume = volumeCourant;
				volumeSlider.value = volumeCourant;
				volumeCourant = 0;

			}

		}*/
	</script>
</body>
</html>